language: python

python:
  - "3.5"
  - "3.6"

services:
  - docker

before_script: pip install docker-compose

jobs:
  inlcude:
    - stage: "PEP8 Check"
      name: "Run Flake"
      script: if [ $( docker-compose run web flake8 project | wc -l) -gt 1]; then exit 1 ; else exit 0 ; fi
    - stage: "Testing"
      name: "Unit Tests"
      script: docker-compose run web python manage.py cov
